<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.1/leaflet.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.55.0/L.Control.Locate.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.0/MarkerCluster.Default.css" />
		<link rel="stylesheet" href="https://cdn.rawgit.com/stefanocudini/leaflet-search/master/src/leaflet-search.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.1/leaflet.draw.css" />
		
		 <style type="text/css">
			body {  padding: 0; margin: 0;  }
			html, body, #map {  height: 100%;  }
		</style>
		
		<title>Defibrillator Locations</title>
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.1/leaflet.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-locatecontrol/0.55.0/L.Control.Locate.min.js" ></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.0/leaflet.markercluster.js"></script>
		<script src="https://cdn.rawgit.com/stefanocudini/leaflet-search/master/src/leaflet-search.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-hash/0.2.1/leaflet-hash.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.1/leaflet.draw.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.1/leaflet.draw-src.js"></script>
		
	</head>
	<body>
		<div id="map"></div>
		
		<script>
			var VMmap = L.tileLayer.wms("http://api.maps.vic.gov.au/geowebcacheWM/service/wms?", {
				layers: 'WEB_MERCATOR',
				format: 'image/png',
				transparent: true,
				version: '1.1.1',
				attribution: "© Vicmap API"});
			
			var VMhybrid = L.tileLayer.wms("http://api.maps.vic.gov.au/geowebcacheWM/service/wms?", {
				layers: 'HYBRID_MERCATOR',
				format: 'image/png',
				transparent: true,
				version: '1.1.1',
				attribution: "© Vicmap API"});
			
			var VMsat = L.tileLayer.wms("http://api.maps.vic.gov.au/geowebcacheWM/service/wms?", {
				layers: 'SATELLITE_WM',
				format: 'image/png',
				transparent: true,
				version: '1.1.1',
				attribution: "© Vicmap API"});
			
			var VM = L.layerGroup([VMsat, VMhybrid]);
						
			var drawnItems = new L.FeatureGroup();
 			map.addLayer(drawnItems);
 
       			var drawControl = new L.Control.Draw({
				draw: {
					polyline: false,
           				polygon: false,
            				circle: false,
					rectangle: false,
            				marker: true
				},
           			edit: {
               				featureGroup: drawnItems
          			}
      			});
       			map.addControl(drawControl);
			
			var baseMaps = {
				"Map"	: VMmap,
				"Aerial": VM,
				"Edit Layer": drawnItems
			};
			
			var map = L.map('map', {
				center	: [-36.74743, 146.97084],
				zoom	: 14,
				layers	: [VMmap]
			});
			
			L.control.layers(baseMaps).addTo(map);
			L.control.locate().addTo(map);
			
			/*var editableLayers = new L.FeatureGroup();
    			map.addLayer(editableLayers);
			
			var MyCustomMarker = L.Icon.extend({
        			options: {
        				shadowUrl: null,
            				iconAnchor: new L.Point(12, 12),
            				iconSize: new L.Point(24, 24),
            				iconUrl: 'https://cdn2.iconfinder.com/data/icons/finance-solid-icons-vol-3/48/106-512.png'
        			}
    			});
			
			var options = {
        			position: 'topleft',
        			draw: {
            				polyline: false,
           				polygon: false,
            				circle: false,
					rectangle: false,
            				marker: {
                				icon: new MyCustomMarker()
            				}
        			},
        			edit: {
            				featureGroup: editableLayers, //REQUIRED!!
            				remove: false
        			}
    			};
		
			var drawControl = new L.Control.Draw(options);
    			map.addControl(drawControl);

    			map.on(L.Draw.Event.CREATED, function (e) {
				var type = e.layerType, layer = e.layer;

        			if (type === 'marker') {
            				layer.bindPopup('A popup!');
        			}
        			editableLayers.addLayer(layer);
    			});*/	
		</script>	
	</body>
 </html>
